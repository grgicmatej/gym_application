<!-- Design JS -->
<script src="<?= App::config("url") ?>vendor/js/design1.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design2.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design3.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design4.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design5.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design6.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design7.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design8.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design9.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design10.js"></script>

<script src="<?= App::config("url") ?>vendor/js/design11.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design12.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design13.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design14.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design15.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design16.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design17.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design18.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design19.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design20.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design21.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design22.js"></script>

<script src="<?= App::config("url") ?>vendor/js/design23.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design24.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design25.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design26.js"></script>
<script src="<?= App::config("url") ?>vendor/js/design27.js"></script>

<!-- Additional JS -->
<script src="<?= App::config("url") ?>vendor/js/scripts.js"></script>
<script src="<?= App::config("url") ?>vendor/js/inputsanitizers.js"></script>

<!-- Bootstrap -->
<script src="<?= App::config("url") ?>vendor/Bootstrap/bootstrap.js"></script>


<script>
    // Variables start
    const urlAddress = 'http://localhost:8080/gym.com.hr_v2/';
    document.getElementById("dt1").style.display = "none";
    // Variables end


    // Chart script
    var areaChartCanvas = $('#areaChart').get(0).getContext('2d')

    var areaChartData = {
        labels: [<?php foreach ($monthsInYear as $my) {
            echo $my . " ,";
        }?>],
        datasets: [
            {
                label: 'Novi korisnici',
                backgroundColor: 'rgba(116, 198, 135, 0.5)',
                borderColor: 'rgba(116, 198, 135, 1)',
                pointRadius: true,
                pointColor: 'rgba(210, 214, 222, 1)',
                pointStrokeColor: '#c1c7d1',
                pointHighlightFill: '#fff',
                pointHighlightStroke: 'rgba(220,220,220,1)',
                data: [<?php foreach ($yearlyStats as $ys) {
                    echo $ys->userData . ", ";
                }?>]
            },
        ]
    }

    var areaChartOptions = {
        maintainAspectRatio: true,
        responsive: true,
        legend: {
            display: true
        },
        scales: {
            xAxes: [{
                gridLines: {
                    display: false,
                },
                scaleLabel: {
                    display: true,
                    labelString: 'Mjeseci'
                }
            }],
            yAxes: [{
                gridLines: {
                    display: true,
                }
            }]
        }
    }

    new Chart(areaChartCanvas, {
        type: 'line',
        data: areaChartData,
        options: areaChartOptions
    })

    // chart script end

    // soccer calendar start
    $('.soccerCalendar').on('click', function () {
        $("#soccerCalendar").modal('show');

        var Calendar = FullCalendar.Calendar;
        var calendarEl = document.getElementById('calendar');

        var calendar = new Calendar(calendarEl, {
            eventClick: function(info) {

                var id = info.event.id
                $.ajax({
                    method: "POST",
                    data: {data: id},
                    url: urlAddress + 'Calendar/checkCalendarDetails/',
                    success: function (response) {
                        response = JSON.parse(response)
                        $("#soccerCalendarDetails").modal('show');

                        $("#Soccer_Contact_Name").text(response["Soccer_Contact_Name"]);
                        $("#Soccer_Contact_Phone").text(response['Soccer_Contact_Phone']);
                        $("#Soccer_Start_Time").text(formatDate(response['Soccer_Start_Time'])+' '+formatTime(response['Soccer_Start_Time']));
                        $("#Soccer_End_Time").text(formatDate(response['Soccer_End_Time'])+' '+formatTime(response['Soccer_End_Time']));

                        $("#SoccerCalendarCancel").html("<a class='SoccerCancel' id='SoccerCancel_"+id+"'><span class='btn btn-block btn-outline-secondary'>Otkazivanje termina</span></a>");
                        $("#SoccerCalendarConfirm").html("<a><span class='btn btn-block btn-outline-primary SoccerConfirm' id='SoccerConfirm_"+id+"' >Potvrda dolaska</span></a>");


                        $('.SoccerCancel').on('click', function () {
                            var id = $(this).attr('id');
                            id = id.split('_')[1];

                            $.ajax({
                                method: "POST",
                                data: {Soccer_Id: id},
                                url: urlAddress + 'Calendar/removeEvent',
                                success: function () {
                                    $("#soccerCalendarDetails").fadeOut(800, function () {
                                        $(this).modal('hide');
                                    });
                                    $("#soccerCalendar").fadeOut(800, function () {
                                        $(this).modal('hide');
                                    });
                                    $(this).fadeIn(400, function notification() {
                                        successNotification('Uspješno potvrđen dolazak.')
                                    });

                                    calendar.destroy();

                                    // ovo radi ali je problem što je u dashboardu pokupio te podatke, treba preko ajaxa vuci podatke calendar/checkCalendar
                                }
                            });
                        });


                    },
                    error: function () {
                        $("#soccerCalendarDetails").fadeOut(800, function () {
                            $(this).modal('hide')
                        });
                        $(this).fadeIn(400, function notification() {
                            warningNotification('Došlo je do pogreške. Pokušajte ponovo.')
                        });
                    }
                });
            },
            headerToolbar: {
                left  : 'prev,next today',
                center: 'title',
                right : 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            themeSystem: 'bootstrap',

            events: [
                <?php foreach ($calendarData as $cd):?>
                {
                    id             : <?=$cd->Soccer_Id?>,
                    title          : '<?=$cd->Soccer_Contact_Name?>',
                    start          : new Date(<?=$cd->SoccerYearStart?>,<?=($cd->SoccerMonthStart)-1?>, <?=$cd->SoccerDayStart?>, <?=$cd->SoccerHourStart?>, 0),
                    end            : new Date(<?=$cd->SoccerYearEnd?>,<?=($cd->SoccerMonthEnd)-1?>, <?=$cd->SoccerDayEnd?>, <?=$cd->SoccerHourEnd?>, 0),
                    backgroundColor: '#16A2B8',
                    borderColor    : '#16A2B8',
                   // url            : urlAddress+'Check/test/<?=$cd->Soccer_Id?>',
                    allDay         : false,
                    contact        : '<?=$cd->Soccer_Contact_Phone?>'

                },
                <?php endforeach;?>
            ],
            editable  : false,
            droppable : false,
        });
        setTimeout(() => {  calendar.render(); }, 500);
    });

    // soccer calendar end
</script>


<!--

/*
parametri:
{
plava boja za nogomet: #16A2B8
title          : '',
start          : new Date(y, m, d, 12, 0),
end            : new Date(y, m, d, 14, 0),
backgroundColor: '#f56954', //red
borderColor    : '#f56954', //red
allDay         : false
url            : 'https://www.google.com/'
},
*/ -->